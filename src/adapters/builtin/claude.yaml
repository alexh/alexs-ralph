name: claude
displayName: Claude

command: claude

availability:
  check: which

spawn:
  args:
    - "{{#skipPermissions}}--dangerously-skip-permissions{{/skipPermissions}}"
    - "-p"
    - "{{prompt}}"
    - "--output-format"
    - "stream-json"

continue:
  args:
    - "{{#skipPermissions}}--dangerously-skip-permissions{{/skipPermissions}}"
    - "--continue"
    - "{{sessionId}}"
    - "-p"
    - "{{prompt}}"
    - "--output-format"
    - "stream-json"

sessionExtraction:
  patterns:
    - '"sessionId"\\s*:\\s*"([^"]+)"'
    - '"session_id"\\s*:\\s*"([^"]+)"'

resumePrompt: |
  RESUMING FROM PAUSE (previous session)

  ## Summary of work done so far:
  {{workSummary}}

  ## Remaining acceptance criteria:
  {{#remainingCriteria}}
  - {{.}}
  {{/remainingCriteria}}

  Please continue working on this task. Review the summary above and pick up where you left off. When each criterion is complete, emit <criterion-complete>N</criterion-complete>. When all criteria are done, emit <promise>TASK COMPLETE</promise>.

meta:
  version: "1.0"
  description: Anthropic Claude Code CLI adapter
